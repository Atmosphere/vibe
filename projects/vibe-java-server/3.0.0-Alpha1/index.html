---
layout: project
title: Vibe Java Server
---

<p>A simple <sup><strong>A</strong></sup>, scalable <sup><strong>B</strong></sup> Java server designed to run any framework or platform on Java Virtual Machine <sup><strong>C</strong></sup>.</p>
<dl>
    <dt>A</dt>
    <dd>All interface you need to know is Server and Socket. Indeed.</dd>
    <dt>B</dt>
    <dd>Shared nothing architecture is adopted to help scale application horizontally with ease.</dd>
    <dt>C</dt>
    <dd>Because it is built on Vibe Java Server Platform which is I/O abstraction layer, you can run your application on any platform that it supports seamlessly e.g. Play, Vert.x, Atmosphere and Servlet.</dd>
</dl>
<hr />
<h2>Getting Started</h2>
<p>Let's write an echo server running on the top of Servlet container.</p>
{% capture panel %}
Add the following dependencies to your build or include them on classpath manually.

```xml
<dependencies>
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>vibe</artifactId>
        <version>3.0.0-Alpha1</version>
    </dependency>
    <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>vibe-platform-atmosphere2</artifactId>
        <version>3.0.0-Alpha1</version>
    </dependency>
</dependencies>
```

Once you've set up your build, you'll be able to write `Bootstrap.java`.

```java
// TODO vibe imports

import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;

@WebListener // A
public class Bootstrap implements ServletContextListener {
    @Override
    public void contextInitialized(ServletContextEvent event) {
        Server server = new DefaultServer(); // B
        server.socketAction(new Action<Socket>() { // C
            @Override
            public void on(final Socket socket) {
                socket.on("echo", new Action<Object>() { // D
                    @Override
                    public void on(Object data) {
                        socket.send("echo", data);
                    }
                });
                socket.on("chat", new Action<Object>() { // E
                    @Override
                    public void on(Object data) {
                        server.all().send("chat", data);
                    }
                });
            }
        });

        ServletContext servletContext = event.getServletContext();
        new AtmosphereBridge(servletContext, "/vibe").httpAction(server.httpAction()).websocketAction(server.websocketAction()); // F
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {}
}
```
{% endcapture %}{{ panel | markdownify }}

<dl>
    <dt>A <code>@WebListener</code></dt>
    <dd>It declares <code>Bootstrap</code> as a listener. Accordingly, once the servlet container starts, <code>contextInitialized</code> is executed.</dd>
    <dt>B <code>Server server = new DefaultServer()</code></dt>
    <dd>It creates a server instance by new keyword so you can delegate its creation to other framework like Spring. To scale applciation, use <code>ClusteredServer</code> with Message Oriented Middleware.</dd>
    <dt>C <code>server.socketAction(socket -> {})</code></dt>
    <dd>It adds an action to be executed when a socket representing client has been opened. There is no restriction to add an action. Therefore you can add multiple actions before and after installation.</dd>
    <dt>D <code>socket.on("echo", data -> socket.send("echo", data))</code></dt>
    <dd>When the socket receives <code>echo</code> event, sends it back.</dd>
    <dt>E <code>socket.on("chat", data -> server.all().send("chat", data))</code></dt>
    <dd>When the socket receives <code>chat</code> event, sends it to all sockets that have connected to this server if <code>DefaultServer</code> or all servers in the cluster if <code>ClusteredServer</code>. To select a single or a group of specific sockets, use <code>server.byId</code> or <code>server.byTag</code>.</dd>
    <dt>F <code>new AtmosphereBridge(servletContext, "/vibe").httpAction(server.httpAction()).websocketAction(server.websocketAction())</code></dt>
    <dd>As a platform of Vibe Java Server Platform, Atmosphere will deliver HTTP and WebSocket connections whose a request path belongs to <code>/vibe</code> from the Servlet container to the server.</dd>
</dl>